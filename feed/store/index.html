<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Instagram Feed</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <svg width="20em" viewBox="0 0 103 29" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M5.57122 0.0997054C3.46872 0.978768 1.16684 3.45283 0.441845 6.56127C-0.48253 10.4944 3.35091 12.1528 3.6681 11.6091C4.0306 10.9747 2.97935 10.7572 2.76185 8.70908C2.48997 6.08095 3.71341 3.12658 5.25403 1.83971C5.54403 1.59502 5.52591 1.93033 5.52591 2.54658L5.47153 15.651C5.47153 18.4603 5.35372 19.3394 5.14528 20.2185C4.93684 21.1066 4.60153 21.7047 4.84622 21.9403C5.13622 22.1941 6.36872 21.5778 7.07559 20.581C7.88326 19.349 8.3031 17.9033 8.28091 16.4303C8.34435 14.5635 8.33528 11.6 8.34435 9.91439C8.34435 8.37377 8.37153 3.83346 8.31716 1.10564C8.29903 0.435018 6.44122 -0.262795 5.57122 0.108768V0.0997054ZM80.0015 13.2222C79.9726 14.3979 79.7011 15.5549 79.204 16.6206C78.4337 18.1794 76.8206 18.6597 76.1318 16.4213C75.7693 15.2069 75.7422 13.1678 76.014 11.4641C76.2859 9.7422 77.0472 8.42814 78.3068 8.54596C79.5575 8.66377 80.1375 10.2678 80.0015 13.2222ZM59.0218 22.2666C59.0037 24.6863 58.6231 26.8069 57.8075 27.4322C56.6384 28.3022 55.0887 27.6406 55.4059 25.8735C55.6868 24.3147 57.0372 22.7197 59.0309 20.7622L59.0218 22.2666ZM58.7047 13.2041C58.6516 14.3823 58.3813 15.5407 57.9072 16.6206C57.1368 18.1794 55.5147 18.6597 54.835 16.4213C54.3818 14.8897 54.4906 12.9141 54.7172 11.6635C55.0162 10.0503 55.7322 8.54596 57.01 8.54596C58.2606 8.54596 58.8768 9.90533 58.7047 13.2041ZM46.5518 13.186C46.5289 14.3759 46.2605 15.5483 45.7634 16.6297C44.9659 18.1703 43.38 18.6597 42.6822 16.4213C42.1837 14.8172 42.3559 12.615 42.5643 11.4369C42.8725 9.66971 43.6518 8.42814 44.8572 8.53689C46.1078 8.66377 46.7059 10.2588 46.5518 13.186ZM102.241 14.8263C101.942 14.8263 101.797 15.1435 101.688 15.6691C101.289 17.4997 100.872 17.9166 100.329 17.9166C99.7306 17.9166 99.1869 17.0103 99.0419 15.1978C98.9331 13.766 98.9512 11.1378 99.0962 8.51877C99.1234 7.98408 98.9693 7.45845 97.5284 6.93283C96.9122 6.70627 96.0059 6.37095 95.5618 7.45845C94.6644 9.52767 94.0311 11.7016 93.6768 13.9291C93.6768 13.9835 93.6043 13.9925 93.5862 13.8747C93.5228 13.0863 93.3506 11.6453 93.3325 8.62752C93.3325 8.03846 93.2056 7.54002 92.5531 7.13221C92.1272 6.86033 90.8493 6.39814 90.3781 6.95096C89.9884 7.40408 89.5262 8.64564 89.0459 10.1047L88.3753 12.0985L88.3843 7.67596C88.3843 7.22283 88.0762 7.06877 87.9765 7.04158C87.4448 6.87758 86.8986 6.76529 86.3453 6.70627C85.9103 6.70627 85.8015 6.95095 85.8015 7.31345C85.8015 7.35877 85.729 11.5275 85.729 14.4456V14.8625C85.4843 16.2038 84.6959 18.0253 83.835 18.0253C82.974 18.0253 82.5662 17.2641 82.5662 13.7841C82.5662 11.7541 82.6297 10.875 82.6568 9.40689C82.675 8.55502 82.7112 7.91158 82.7112 7.76658C82.7022 7.31345 81.9228 7.08689 81.5603 6.99627C81.1978 6.91471 80.8715 6.87845 80.6268 6.89658C80.2643 6.9147 80.0197 7.14127 80.0197 7.45845V7.95689C79.6285 7.33828 79.0463 6.86418 78.3612 6.60658C77.0562 6.21689 75.6968 6.56127 74.6728 7.99314C73.7888 9.25758 73.2685 10.7402 73.1684 12.2797C73.0234 13.6391 73.0778 15.0075 73.3225 16.1766C73.0234 17.4816 72.4525 18.0253 71.8362 18.0253C70.939 18.0253 70.2956 16.5572 70.3681 14.0378C70.4225 12.3703 70.7487 11.2013 71.1112 9.51564C71.2653 8.79064 71.1475 8.42814 70.8303 8.06564C70.5403 7.73033 69.924 7.55814 69.0268 7.76658C68.3925 7.91158 67.4862 8.07471 66.6706 8.19252C66.6706 8.19252 66.7159 8.0022 66.7612 7.64877C66.9697 5.80908 64.9669 5.95408 64.3234 6.54314C63.9428 6.89658 63.689 7.30439 63.5803 8.05658C63.4262 9.2347 64.3959 9.78752 64.3959 9.78752C63.7731 12.1398 62.7292 14.3598 61.3147 16.3397V15.7053C61.3056 12.6603 61.3418 10.2678 61.36 9.40689C61.3781 8.55502 61.4143 7.92971 61.4143 7.77564C61.4143 7.44939 61.215 7.32252 60.8162 7.16846C60.4537 7.02346 60.0368 6.93283 59.6018 6.89658C59.0581 6.85127 58.7228 7.14127 58.7318 7.48564V7.95689C58.3389 7.3363 57.7531 6.8619 57.0643 6.60658C55.7593 6.21689 54.4 6.56127 53.3759 7.99314C52.5236 9.27024 52.0063 10.7412 51.8715 12.2706C51.7356 13.6935 51.7537 14.8988 51.9531 15.9319C51.7447 16.956 51.1465 18.0163 50.4759 18.0163C49.615 18.0163 49.1165 17.2641 49.1165 13.7841C49.1165 11.7541 49.18 10.875 49.2072 9.40689C49.2253 8.55502 49.2615 7.91158 49.2615 7.76658C49.2615 7.31345 48.4731 7.08689 48.1106 6.99627C47.73 6.90564 47.3947 6.87846 47.15 6.90564C46.8147 6.92377 46.579 7.22283 46.579 7.44939V7.95689C46.1861 7.3363 45.6003 6.8619 44.9115 6.60658C43.6065 6.21689 42.2562 6.57033 41.2231 7.99314C40.5434 8.92658 39.9997 9.95971 39.7187 12.2525C39.6426 12.8658 39.6063 13.4833 39.61 14.1013C39.3381 15.7416 38.1509 17.6356 37.1812 17.6356C36.6103 17.6356 36.0665 16.5391 36.0665 14.1919C36.0665 11.0653 36.2659 6.61564 36.2931 6.1897L37.7612 6.16252C38.3775 6.16252 38.9303 6.17158 39.7459 6.12627C40.1537 6.10814 40.5434 4.64002 40.1265 4.45877C39.9362 4.37721 38.5859 4.30471 38.0422 4.29564C37.589 4.28658 36.3384 4.19596 36.3384 4.19596C36.3384 4.19596 36.4562 1.24158 36.4834 0.933455C36.5015 0.66158 36.1662 0.534705 35.9668 0.453143C35.5195 0.273102 35.0549 0.139485 34.5803 0.0543927C33.8915 -0.0815448 33.5834 0.0543926 33.52 0.634393C33.4293 1.51346 33.384 4.09627 33.384 4.09627C32.8765 4.09627 31.1456 3.99658 30.6472 3.99658C30.1759 3.99658 29.6684 6.00845 30.3209 6.03564L33.2209 6.11721L33.1937 12.035V12.461C32.7134 14.935 31.0459 16.2672 31.0459 16.2672C31.4084 14.636 30.6653 13.4125 29.3512 12.3703C28.8618 11.9897 27.9012 11.2647 26.8228 10.4672C26.8228 10.4672 27.4481 9.85096 28.0009 8.61845C28.3906 7.74846 28.4087 6.75158 27.4481 6.53408C25.8622 6.16252 24.5481 7.32252 24.1584 8.57314C24.0063 8.97798 23.9682 9.41677 24.0481 9.84178C24.128 10.2668 24.3229 10.6618 24.6115 10.9838L24.7475 11.156C24.385 11.8447 23.8956 12.7691 23.4787 13.4941C22.3278 15.4878 21.4487 17.0738 20.7872 17.0738C20.2615 17.0738 20.2706 15.4697 20.2706 13.9653C20.2706 12.6694 20.3612 10.721 20.4428 8.70908C20.47 8.03846 20.1347 7.65783 19.5728 7.31345C19.126 7.00438 18.6199 6.79145 18.0865 6.68814C17.4522 6.68814 15.6397 6.77877 13.9178 11.736C13.7093 12.3613 13.2834 13.4941 13.2834 13.4941L13.3197 7.54002C13.3197 7.39502 13.2472 7.26814 13.075 7.17752C12.5341 6.89001 11.9374 6.72306 11.3259 6.68814C10.9997 6.68814 10.8365 6.84221 10.8365 7.14127L10.7731 16.4756C10.7731 17.1825 10.7912 18.0072 10.8637 18.3697C10.9362 18.7322 11.045 19.0222 11.19 19.1944C11.3259 19.3756 11.489 19.5025 11.7518 19.5569C12.0056 19.6113 13.365 19.7835 13.4375 19.2669C13.5281 18.6416 13.5281 17.971 14.244 15.4606C15.3497 11.5547 16.7997 9.64252 17.4884 8.97189C17.6062 8.84502 17.7422 8.84502 17.7331 9.03533L17.5337 13.8566C17.3525 18.7231 18.2406 19.6203 19.5003 19.6203C20.47 19.6203 21.8384 18.6597 23.3065 16.231L25.7534 12.1528L27.1853 13.476C28.3453 14.5635 28.7259 15.6147 28.4722 16.6025C28.2818 17.3547 27.5478 18.1431 26.2609 17.3819C25.8803 17.1553 25.7172 16.9831 25.3456 16.7385C25.1372 16.6025 24.829 16.5572 24.6387 16.7022C24.1584 17.0647 23.8775 17.536 23.7234 18.1069C23.5693 18.6597 24.1312 18.9588 24.7112 19.2125C25.2097 19.4391 26.2881 19.6385 26.9768 19.6656C29.6412 19.7563 31.78 18.3788 33.2662 14.8263C33.5381 17.8894 34.6709 19.6294 36.6375 19.6294C37.9515 19.6294 39.2747 17.9256 39.8547 16.2581C40.0178 16.9378 40.2625 17.5269 40.5797 18.0344C42.1022 20.436 45.0475 19.9103 46.5247 17.8713C46.9778 17.246 47.0503 17.0194 47.0503 17.0194C47.0945 17.7055 47.3912 18.351 47.8832 18.8313C48.3752 19.3115 49.0277 19.5926 49.7147 19.6203C50.7115 19.6203 51.7356 19.1491 52.4606 17.5269C52.5422 17.7081 52.6418 17.8713 52.7325 18.0344C54.255 20.436 57.2003 19.9103 58.6775 17.8713L58.8587 17.6175L58.904 18.8863L57.5447 20.1278C55.2609 22.2122 53.5209 23.7981 53.394 25.6469C53.2309 28.0031 55.1431 28.8731 56.5931 28.991C57.3183 29.027 58.0401 28.8688 58.6837 28.5327C59.3274 28.1965 59.8696 27.6946 60.2543 27.0788C60.9612 26.0366 61.4325 23.7891 61.3962 21.5688L61.3418 18.3425C63.5126 15.8323 65.1802 12.9278 66.2537 9.78752C66.2537 9.78752 67.0965 9.79658 67.9937 9.7422C68.2837 9.72408 68.3653 9.77846 68.3109 9.98689C68.2475 10.2406 67.1781 14.3731 68.1568 17.1281C68.8275 19.0131 70.3318 19.6203 71.2381 19.6203C72.2803 19.6203 73.2862 18.8319 73.8209 17.6538L74.0293 18.0344C75.5518 20.436 78.4881 19.9103 79.9743 17.8713C80.3097 17.4181 80.5 17.0194 80.5 17.0194C80.8262 19.0131 82.3759 19.6294 83.264 19.6294C84.1884 19.6294 85.0765 19.2488 85.7834 17.5631C85.8106 18.3063 85.8559 18.9135 85.9284 19.1038C85.9737 19.2216 86.2365 19.3756 86.4359 19.4391C87.2787 19.7472 88.1396 19.6022 88.4659 19.5388C88.6834 19.4935 88.8556 19.3122 88.8828 18.8591C88.9462 17.6538 88.91 15.6328 89.2725 14.1375C89.8797 11.6091 90.4506 10.6303 90.7225 10.15C90.8765 9.87814 91.0487 9.83283 91.0578 10.1228C91.0668 10.7028 91.094 12.4066 91.3297 14.6994C91.5109 16.385 91.7465 17.3819 91.9187 17.69C92.4353 18.5963 93.0696 18.6416 93.5771 18.6416C93.9034 18.6416 94.5922 18.551 94.5287 17.98C94.5015 17.6991 94.5468 15.9681 95.1631 13.485C95.5528 11.8628 96.2053 10.4038 96.4409 9.86002C96.5315 9.66971 96.5769 9.82377 96.5769 9.86002C96.5225 10.9656 96.4137 14.6178 96.8668 16.6206C97.4831 19.3213 99.2684 19.6294 99.8937 19.6294C101.226 19.6294 102.313 18.6144 102.676 15.9591C102.767 15.3247 102.631 14.8263 102.241 14.8263Z" fill="black" />
    </svg>
    <h1>Store Feed</h1>
    
    <main class="mainContainer"></main>
    <!-- https://codepen.io/frank-gp/pen/XWyNzxb -->

    <main class="mainContainer"></main>

    <script>
      var fetchDataUrl = "https://fgp.one/feed/get-data";

      fetch(fetchDataUrl)
        .then((response) => response.json())
        .then((data) => processInstagramData(data))
        .catch((error) => console.error(error));

      const processInstagramData = (arrayData) => {
        arrayData.data.forEach((item) => processItem(item));
      };

      const processItem = (item) => {
        console.log(item);

        if (item.media_type === "IMAGE") {
          const caption = item.caption;
          if (caption) {
            const urls = extractUrls(caption);
            const hashtags = extractHashtags(caption);
            const title = extractTitle(caption);
            const content = extractContent(caption);

            let html = `<img src="${item.media_url}">
                            <a class="icon-instagram" href="${item.permalink}" target="_blank" rel="noopener noreferrer"></a>`;

            urls.forEach((url) => {
              html += `<a class="icon-shopping-cart" href="${url}" target="_blank" rel="noopener noreferrer"></a>`;
            });

            html += `<p class="title">${title}</p>`;
            html += `<p>${content}</p>`;
            appendToMainContainer(html);
          }
        }
      };

      const extractUrls = (caption) => {
        const urlRegex = /(https?:\/\/[^\s]+)/g;
        return caption.match(urlRegex) || [];
      };

      const extractHashtags = (caption) => {
        const hashtagRegex = /#(\w+)/g;
        return caption.match(hashtagRegex) || [];
      };

      const extractTitle = (caption) => {
        const lines = caption.split("\n");
        return lines[0] || "";
      };

      const extractContent = (caption) => {
        return caption.replace(/https?:\/\/\S+/g, "").replace(/#\S+/g, "");
      };

      const appendToMainContainer = (html) => {
        const mainContainer = document.querySelector(".mainContainer");
        const aside = document.createElement("aside");
        aside.innerHTML = html;
        aside.classList.add("imgContainer");
        mainContainer.appendChild(aside);
      };
    </script>
  </body>
</html>
