<!-- upload.html -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://frankgp.com/component/layout.js" type="module"></script>
    <title>Data Upload</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 50px;
      }

      h1 {
        color: blue;
      }

      form {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 20px;
      }

      label {
        margin-bottom: 10px;
      }

      input {
        margin-bottom: 20px;
      }

      button {
        padding: 10px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Data Upload</h1>

      <form id="uploadForm">
        <label for="jsonData">JSON Data:</label>
        <textarea id="jsonData" name="jsonData" rows="5" cols="50" required></textarea>

        <button type="button" onclick="uploadData()">Upload Data</button>
      </form>

      <script>
        async function uploadData() {
          const jsonData = document.getElementById("jsonData").value;

          try {
            const response = await fetch("./upload", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(JSON.parse(jsonData)),
            });

            if (response.ok) {
              alert("Data uploaded successfully!");
            } else {
              alert("Failed to upload data.");
            }
          } catch (error) {
            console.error("Error uploading data:", error);
            alert("Error uploading data. Please check the console for details.");
          }
        }
      </script>
    </main>
  </body>
</html>
