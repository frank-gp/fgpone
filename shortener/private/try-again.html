<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://frankgp.com/component/layout.js" type="module"></script>
    <title>Incorrect credentials</title>
    <style>
      .btn-logout {
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        font-size: 16px;
        border: none;
        border-radius: 4px;
        cursor: not-allowed;
        width: 200px;
        margin-top: 20px;
      }

      .btn-logout.enabled {
        cursor: pointer;
        background-color: #0056b3;
      }

      .captcha-container {
        margin-top: 20px;
        font-size: 18px;
      }

      input[type="checkbox"] {
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Incorrect credentials</h1>

      <div class="logout-container">
        <button class="btn-logout" id="retryButton" onclick="removeLocalStorage()" disabled>⬅️ Try again</button>
      </div>

      <!-- Checkbox CAPTCHA -->
      <div class="captcha-container">
        <label> <input type="checkbox" id="captchaCheckbox" /> I'm not a robot </label>
      </div>
    </main>

    <script>
      const storedUsername = localStorage.getItem("username");
      const storedPassword = localStorage.getItem("password");

      console.log("Stored username:", storedUsername);
      console.log("Stored password:", storedPassword);

      // Function to remove username and password from localStorage
      function removeLocalStorage() {
        localStorage.removeItem("username");
        localStorage.removeItem("password");
        location.href = "/admin";
      }

      // Enable button when mouse moves over the body and checkbox is checked
      document.body.addEventListener("mousemove", function () {
        enableButtonIfValid();
      });

      // Enable button if checkbox is checked
      document.getElementById("captchaCheckbox").addEventListener("change", function () {
        enableButtonIfValid();
      });

      // Function to enable button if CAPTCHA is checked and mouse has moved
      function enableButtonIfValid() {
        const button = document.getElementById("retryButton");
        const captchaCheckbox = document.getElementById("captchaCheckbox");

        // Check if checkbox is checked and mouse has moved
        if (captchaCheckbox.checked) {
          button.disabled = false;
          button.classList.add("enabled");
        } else {
          button.disabled = true;
          button.classList.remove("enabled");
        }
      }
    </script>
  </body>
</html>
